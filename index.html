<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAIONICOL | Terminale Principale</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="baionicol-core.css?v=13">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Space+Grotesk:wght@400;700&family=VT323&display=swap" rel="stylesheet">
    
    <style>
        /* --- HUD OVERLAY --- */
        .hud-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 999; box-shadow: inset 0 0 150px rgba(0,0,0,0.95); overflow: hidden; }
        .hud-arc { position: absolute; top: -10vh; width: 15vw; height: 120vh; border-radius: 50%; opacity: 0.15; transition: opacity 0.5s ease; }
        .arc-left { left: -7.5vw; border-right: 3px solid var(--cyan-neon); filter: drop-shadow(0 0 10px var(--cyan-neon)); }
        .arc-right { right: -7.5vw; border-left: 3px solid var(--cyan-neon); filter: drop-shadow(0 0 10px var(--cyan-neon)); }
        .hud-reticle-top { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); display: flex; align-items: center; gap: 15px; opacity: 0.3; }
        .reticle-line { width: 60px; height: 2px; background-color: var(--cyan-neon); }
        .reticle-center { width: 15px; height: 10px; border: 2px solid var(--cyan-neon); border-top: none; }
        
        .hud-dial { position: absolute; bottom: 40px; right: 40px; width: 80px; height: 80px; border: 1px dashed rgba(0, 243, 255, 0.3); border-radius: 50%; animation: spinSlow 15s linear infinite; }
        .hud-dial::after { content: ''; position: absolute; top: 10px; left: 10px; right: 10px; bottom: 10px; border: 2px solid rgba(57, 255, 20, 0.2); border-top-color: transparent; border-radius: 50%; animation: spinFast 4s linear infinite reverse; }
        @keyframes spinSlow { 100% { transform: rotate(360deg); } }
        @keyframes spinFast { 100% { transform: rotate(360deg); } }

        /* --- SCHERMATA BOOT E ACCENSIONE --- */
        #standby-screen { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: var(--bg-color); z-index: 20000; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        #standby-screen h1 { color: var(--cyan-neon); font-size: 50px; margin-bottom: 30px; letter-spacing: 5px; text-shadow: 0 0 20px var(--cyan-neon); font-family: 'Space Grotesk';}
        .btn-boot { background: rgba(57, 255, 20, 0.1); border: 2px solid var(--green-neon); color: var(--green-neon); padding: 20px 40px; font-family: 'VT323', monospace; font-size: 28px; cursor: pointer; border-radius: 8px; animation: pulseBoot 2s infinite; box-shadow: 0 0 15px rgba(57, 255, 20, 0.3); transition: 0.3s; }
        .btn-boot:hover { background: var(--green-neon); color: var(--bg-color); box-shadow: 0 0 30px var(--green-neon); animation: none; }
        @keyframes pulseBoot { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

        #boot-screen { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: var(--bg-color); z-index: 10000; display: flex; flex-direction: column; justify-content: center; align-items: flex-start; padding: 50px; font-family: 'VT323', monospace; color: var(--green-neon); font-size: 22px; }
        #boot-screen::before { content: " "; display: block; position: absolute; top: 0; left: 0; bottom: 0; right: 0; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06)); z-index: 2; background-size: 100% 2px, 3px 100%; pointer-events: none; }
        .boot-line { margin-bottom: 10px; opacity: 0; z-index: 5; position: relative; text-shadow: 0 0 5px var(--green-neon); }
        .boot-progress { color: var(--amber-neon); }

        .crt-collapse { animation: crtOff 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
        @keyframes crtOff { 0% { transform: scale(1, 1); background-color: var(--bg-color); } 30% { transform: scale(1, 0.02); background-color: #ffffff; box-shadow: 0 0 100px #ffffff; } 70% { transform: scale(0, 0.02); background-color: #ffffff; box-shadow: 0 0 100px #ffffff; opacity: 1;} 100% { transform: scale(0, 0); opacity: 0; } }

        /* --- CALIBRAZIONE OVERLAY --- */
        #calibration-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.95); z-index: 9000; display: none; flex-direction: column; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.5s ease; backdrop-filter: blur(10px); }
        .calib-box { background: rgba(11, 19, 30, 0.95); border: 1px solid var(--cyan-neon); padding: 50px; border-radius: 24px; text-align: center; box-shadow: 0 0 50px rgba(0, 243, 255, 0.2); max-width: 800px; width: 90%; }
        .calib-box h2 { color: var(--cyan-neon); font-size: 36px; letter-spacing: 2px; margin-bottom: 15px; font-family: 'Space Grotesk'; }
        .calib-box p { color: var(--text-main); font-size: 20px; line-height: 1.5; margin-bottom: 40px; font-family: 'Rajdhani';}
        .calib-options { display: flex; gap: 30px; justify-content: center; }
        .calib-btn { background: rgba(0, 243, 255, 0.05); border: 2px solid var(--cyan-neon); color: var(--cyan-neon); padding: 30px 40px; border-radius: 16px; font-family: 'Space Grotesk'; font-size: 22px; font-weight: bold; cursor: pointer; transition: 0.3s; flex: 1; text-transform: uppercase; letter-spacing: 1px; }
        .calib-btn span { display: block; font-family: 'Rajdhani'; font-size: 16px; font-weight: normal; margin-top: 10px; color: var(--text-muted); }
        .calib-btn:hover { background: var(--cyan-neon); color: var(--bg-color); box-shadow: 0 0 30px var(--cyan-neon); transform: translateY(-5px); }
        .calib-btn:hover span { color: var(--bg-color); }

        /* --- LAYOUT HOME (BENTO) --- */
        .content-container { padding: 120px 4vw 40px 4vw; max-width: 1400px; margin: 0 auto; position: relative; z-index: 10; display: flex; flex-direction: column; justify-content: center; min-height: 100vh;}

        .bento-header-banner {
            background: rgba(11, 19, 30, 0.85); border: 1px solid rgba(0, 243, 255, 0.15); border-radius: 24px;
            padding: 30px 40px; backdrop-filter: blur(15px); box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; width: 100%;
            opacity: 0; transition: opacity 0.6s ease;
        }

        .welcome-text-zone { flex: 1; }
        .column-step { font-family: 'VT323', monospace; font-size: 20px; color: var(--cyan-neon); letter-spacing: 3px; display: block; margin-bottom: 5px; }
        .page-title { font-size: 48px; color: var(--text-main); margin-bottom: 10px; font-family: 'Space Grotesk', sans-serif; text-transform: uppercase; letter-spacing: 1px;}

        .mascot-zone { display: flex; align-items: center; justify-content: flex-end; position: relative; z-index: 50; }
        .mascot-box { position: relative; width: 150px; height: 150px; display: flex; justify-content: center; align-items: center; }
        .mascot-box video { width: 100%; height: 100%; object-fit: contain; animation: hologramBoot 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }

        @keyframes hologramBoot {
            0% { opacity: 0; filter: hue-rotate(90deg) brightness(3) drop-shadow(0 0 40px var(--cyan-neon)); transform: scale(1.2) skewX(20deg); }
            10% { opacity: 1; filter: hue-rotate(-45deg) brightness(1.5) drop-shadow(0 0 20px var(--cyan-neon)); transform: scale(0.9) skewX(-10deg); }
            15% { opacity: 0.2; transform: skewX(5deg); }
            20% { opacity: 1; transform: skewX(0); }
            30% { filter: drop-shadow(0 0 30px var(--cyan-neon)); }
            100% { opacity: 1; filter: drop-shadow(0 0 15px rgba(0, 243, 255, 0.3)); transform: scale(1); }
        }

        .robot-speech {
            position: absolute; right: 110%; top: 50%; transform: translateY(-50%);
            background: rgba(0, 15, 25, 0.95); border: 2px solid var(--cyan-neon); border-radius: 16px; 
            padding: 20px 25px; width: 340px; font-family: 'Rajdhani', sans-serif; font-size: 20px; line-height: 1.4;
            color: var(--text-main); box-shadow: 0 10px 25px rgba(0, 243, 255, 0.15); opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }
        .robot-speech::after { content: ''; position: absolute; top: 50%; left: 100%; transform: translateY(-50%); border-width: 12px; border-style: solid; border-color: transparent transparent transparent rgba(0, 15, 25, 0.95); }
        .robot-speech::before { content: ''; position: absolute; top: 50%; left: 100%; transform: translateY(-50%); border-width: 14px; border-style: solid; border-color: transparent transparent transparent var(--cyan-neon); z-index: -1; }
        .robot-speech.active { opacity: 1; }
        .speech-hl { color: var(--cyan-neon); font-weight: bold; }
        .blink-cursor { display: inline-block; width: 8px; height: 20px; background-color: var(--cyan-neon); vertical-align: middle; margin-left: 4px; animation: blink 1s infinite; }

        /* OPZIONI PRINCIPALI */
        .bento-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; width: 100%; max-width: 1100px; margin: 0 auto; opacity: 0; pointer-events: none; transition: opacity 0.5s;}
        
        .bento-card {
            background: rgba(11, 19, 30, 0.85); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 24px;
            padding: 50px 40px; text-align: left; cursor: pointer; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(15px); display: flex; flex-direction: column; align-items: flex-start; justify-content: center;
            position: relative; overflow: hidden; box-shadow: 0 15px 35px rgba(0,0,0,0.4); opacity: 0;
        }

        .show-card { animation: slideUpFade 0.6s ease-out forwards; }
        @keyframes slideUpFade { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }

        .bento-card svg { width: 70px; height: 70px; margin-bottom: 25px; transition: all 0.3s; position: relative; z-index: 2; }
        .bento-card h2 { font-size: 32px; margin-bottom: 10px; transition: color 0.3s; position: relative; z-index: 2; font-family: 'Space Grotesk'; letter-spacing: 1px;}
        .bento-card p { font-size: 18px; color: var(--text-muted); line-height: 1.5; position: relative; z-index: 2; }
        
        .bento-card::after { content: '➔'; position: absolute; right: 40px; bottom: 40px; font-size: 30px; opacity: 0; transform: translateX(-15px); transition: all 0.3s ease; }

        .card-paziente { background: linear-gradient(145deg, rgba(11,19,30,0.85) 50%, rgba(57,255,20,0.06) 100%); border-color: rgba(57, 255, 20, 0.2);}
        .card-paziente svg { color: var(--green-neon); filter: drop-shadow(0 0 10px rgba(57, 255, 20, 0.3)); }
        .card-paziente::after { color: var(--green-neon); }
        .card-paziente:hover { border-color: var(--green-neon); box-shadow: 0 15px 40px rgba(57, 255, 20, 0.2); transform: translateY(-8px); }
        .card-paziente:hover h2 { color: var(--green-neon); }
        .card-paziente:hover::after { opacity: 1; transform: translateX(0); }

        .card-clinica { background: linear-gradient(145deg, rgba(11,19,30,0.85) 50%, rgba(0,136,255,0.06) 100%); border-color: rgba(0, 136, 255, 0.2);}
        .card-clinica svg { color: var(--blue-neon); filter: drop-shadow(0 0 10px rgba(0, 136, 255, 0.3)); }
        .card-clinica::after { color: var(--blue-neon); }
        .card-clinica:hover { border-color: var(--blue-neon); box-shadow: 0 15px 40px rgba(0, 136, 255, 0.2); transform: translateY(-8px); }
        .card-clinica:hover h2 { color: var(--blue-neon); }
        .card-clinica:hover::after { opacity: 1; transform: translateX(0); }

        @media (max-width: 968px) {
            .bento-grid { grid-template-columns: 1fr; }
            .calib-options { flex-direction: column; }
            .bento-header-banner { flex-direction: column; text-align: center; gap: 20px;}
            .robot-speech { right: 0; top: 110%; transform: none; width: 100%; z-index: 100;}
            .robot-speech::after, .robot-speech::before { top: 0; left: 50%; transform: translateX(-50%); border-color: transparent transparent rgba(0, 15, 25, 0.95) transparent; }
            .robot-speech::before { border-color: transparent transparent var(--cyan-neon) transparent; top: -2px; }
        }
    </style>
</head>
<body>

    <div id="standby-screen">
        <h1>BAIONICOL OS</h1>
        <button id="btn-start-boot" class="btn-boot interactive-el"> > INIZIALIZZA TERMINALE _ </button>
    </div>

    <div id="boot-screen">
        <div class="boot-line" id="line1">> Inizializzazione BAIONICOL OS v2.5...</div>
        <div class="boot-line" id="line2">> Connessione server biomedici... <span id="prog2"></span></div>
        <div class="boot-line" id="line3">> Calibrazione miografi periferici... <span id="prog3"></span></div>
        <div class="boot-line" id="line4">> Bypass inibizione corticale... <span id="prog4"></span></div>
        <div class="boot-line" id="line5" style="color: var(--cyan-neon);">> ACCESSO AUTORIZZATO.</div>
    </div>

    <div id="calibration-overlay">
        <div class="calib-box">
            <h2>CALIBRAZIONE INIZIALE</h2>
            <p>Rilevato nuovo operatore o reset richiesto. Selezionare l'architettura biomeccanica di riferimento per adattare i protocolli terapeutici e l'interfaccia hardware di tutto il sistema.</p>
            <div class="calib-options">
                <button class="calib-btn interactive-el" onclick="setProfile('superiore')">
                    ARTO SUPERIORE<span>(Mano, Polso, Gomito)</span>
                </button>
                <button class="calib-btn interactive-el" onclick="setProfile('inferiore')">
                    ARTO INFERIORE<span>(Piede, Caviglia, Ginocchio)</span>
                </button>
            </div>
        </div>
    </div>

    <div class="cursor-ring" id="cursor-ring"></div>

    <div class="hud-overlay">
        <div class="hud-arc arc-left"></div>
        <div class="hud-arc arc-right"></div>
        <div class="hud-reticle-top"><div class="reticle-line"></div><div class="reticle-center"></div><div class="reticle-line"></div></div>
        <div class="hud-dial"></div>
    </div>

    <header>
        <div class="hud-status"><div class="status-dot"></div>Sistema: Online</div>
        <div class="logo">BAIONICOL</div>
        <div class="header-actions">
            <div class="profile-badge interactive-el" id="profile-badge" onclick="resetProfile()">[⚙️ Profilo: In Caricamento...]</div>
        </div>
    </header>

    <div class="content-container">
        
        <div class="bento-header-banner" id="main-banner">
            <div class="welcome-text-zone">
                <span class="column-step">SISTEMA CENTRALE //</span>
                <h1 class="page-title">Terminale Operativo</h1>
                <p class="page-subtitle">Piattaforma di gestione integrata. Seleziona il modulo per procedere.</p>
            </div>
            <div class="mascot-zone">
                <div class="robot-speech" id="robot-speech">
                    <span id="robot-text"></span><span class="blink-cursor"></span>
                </div>
                <div class="mascot-box">
                    <video src="Little power robot.webm" autoplay loop muted playsinline></video>
                </div>
            </div>
        </div>

        <div class="bento-grid" id="main-options">
            
            <div class="bento-card card-paziente interactive-el" onclick="animateAndNavigate('paziente.html')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"/>
                    <path d="M8 14L12 10L16 14"/>
                    <path d="M12 10V22"/>
                    <circle cx="12" cy="10" r="2" fill="currentColor"/>
                </svg>
                <h2>Area Paziente</h2>
                <p>Dashboard riabilitativa: allenamento muscolare, Mirror Therapy e gestione socket.</p>
            </div>

            <div class="bento-card card-clinica interactive-el" onclick="animateAndNavigate('clinica.html')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 16V8C21 6.89543 20.1046 6 19 6H5C3.89543 6 3 6.89543 3 8V16C3 17.1046 3.89543 18 5 18H19C20.1046 18 21 17.1046 21 16Z"/>
                    <path d="M7 22H17"/>
                    <path d="M12 18V22"/>
                    <path d="M8 10L12 14L16 10"/>
                </svg>
                <h2>Area Clinica</h2>
                <p>Diagnostica hardware: stato batterie, analisi cutanea e protocolli d'emergenza.</p>
            </div>

        </div>

    </div>

    <script src="baionicol-core.js"></script>
    <script>
        // ==========================================
        // LA VOCE DEL ROBOT E SUONI DI BOOT
        // ==========================================
        SoundEngine.robotVoice = function() {
            if(!audioCtx || audioCtx.state === 'suspended') return;
            try {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.frequency.value = 600 + Math.random() * 400;
                osc.type = 'sine'; 
                gain.gain.setValueAtTime(0.02, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.04);
                osc.connect(gain); gain.connect(audioCtx.destination);
                osc.start(); osc.stop(audioCtx.currentTime + 0.04);
            } catch(e) {}
        }
        
        // Aggiungiamo i suoni specifici del terminale che mancavano
        SoundEngine.bootBeepDynamic = (step) => SoundEngine.playTone(300 + (step * 200), 'square', 0.1, 0.03);
        SoundEngine.bootSuccess = () => { SoundEngine.playTone(1000, 'sine', 0.2, 0.05); setTimeout(()=>SoundEngine.playTone(1500, 'sine', 0.4, 0.05), 150); };

        let typingTimeout;
        
        function robotSpeak(htmlText, callback) {
            clearTimeout(typingTimeout); 
            
            const bubble = document.getElementById('robot-speech');
            const textContainer = document.getElementById('robot-text');
            bubble.classList.add('active');
            textContainer.innerHTML = '';
            
            let i = 0;
            function type() {
                if (i < htmlText.length) {
                    if (htmlText.charAt(i) === '<') {
                        let tag = '';
                        while(htmlText.charAt(i) !== '>' && i < htmlText.length) { tag += htmlText.charAt(i); i++; }
                        tag += '>'; textContainer.innerHTML += tag; i++;
                        typingTimeout = setTimeout(type, 0); 
                    } else {
                        textContainer.innerHTML += htmlText.charAt(i);
                        if(htmlText.charAt(i) !== ' ' && i % 4 === 0) {
                            SoundEngine.robotVoice(); 
                        }
                        i++;
                        typingTimeout = setTimeout(type, 18); 
                    }
                } else {
                    if(callback) callback();
                }
            }
            type();
        }

        function getGreeting() {
            const hour = new Date().getHours();
            if (hour >= 5 && hour < 12) return "Buongiorno";
            if (hour >= 12 && hour < 18) return "Buon pomeriggio";
            return "Buonasera";
        }

        // ==========================================
        // ANIMAZIONI UI E TRANSIZIONI
        // ==========================================
        function applyProfile() {
            const profile = localStorage.getItem('baionicol_profile');
            const badge = document.getElementById('profile-badge');
            
            if(badge) {
                badge.style.display = 'block';
                if(profile === 'superiore') badge.innerText = "[⚙️ Profilo: Arto Superiore]";
                else if(profile === 'inferiore') badge.innerText = "[⚙️ Profilo: Arto Inferiore]";
            }
        }

        function avviaDialogo() {
            const profile = localStorage.getItem('baionicol_profile');
            const profileName = profile === 'superiore' ? 'Arto Superiore' : 'Arto Inferiore';
            
            document.getElementById('main-banner').style.opacity = '1';
            
            setTimeout(() => {
                const fullText = `${getGreeting()} <span class='speech-hl'>Operatore</span>! Moduli configurati per l'architettura <span style='color: var(--cyan-neon);'>${profileName}</span>. Seleziona l'area operativa in cui desideri procedere.`;
                robotSpeak(fullText, () => mostraOpzioni());
            }, 800);
        }

        function mostraOpzioni() {
            const grid = document.getElementById('main-options');
            grid.style.opacity = '1';
            grid.style.pointerEvents = 'auto';
            
            document.querySelectorAll('.bento-card').forEach((card, index) => {
                setTimeout(() => { card.classList.add('show-card'); }, index * 200); 
            });
        }

        function animateAndNavigate(targetUrl) {
            SoundEngine.click(); 
            document.body.classList.add('zoom-in');
            setTimeout(() => { window.location.href = targetUrl; }, 550);
        }

        // ==========================================
        // SISTEMA DI BOOT
        // ==========================================
        function simulateLoading(lineId, spanId, targetText, successColor, nextStepCallback) {
            const line = document.getElementById(lineId);
            if(line) line.style.opacity = '1';
            const span = document.getElementById(spanId);
            let progress = 0;
            let interval = setInterval(() => {
                progress += Math.floor(Math.random() * 25) + 5;
                if(progress >= 100) {
                    clearInterval(interval);
                    if(span) span.innerHTML = ` <span style="color: ${successColor};">[ ${targetText} ]</span>`;
                    if(nextStepCallback) nextStepCallback();
                } else {
                    if(span) span.innerHTML = ` <span class="boot-progress">[ ${progress}% ]</span>`;
                }
            }, 60);
        }

        function eseguiEffettoCRT() {
            const bootScreen = document.getElementById('boot-screen');
            if(!bootScreen) return;
            bootScreen.querySelectorAll('.boot-line').forEach(line => line.style.display = 'none');
            bootScreen.classList.add('crt-collapse');
            
            setTimeout(() => {
                bootScreen.style.display = 'none';
                if(!localStorage.getItem('baionicol_profile')) {
                    const overlay = document.getElementById('calibration-overlay');
                    if(overlay) { overlay.style.display = 'flex'; setTimeout(() => { overlay.style.opacity = '1'; }, 100); }
                } else {
                    applyProfile(); avviaDialogo();
                }
            }, 600); 
        }

        function setProfile(type) {
            SoundEngine.success(); 
            localStorage.setItem('baionicol_profile', type); 
            document.getElementById('calibration-overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('calibration-overlay').style.display = 'none';
                applyProfile(); avviaDialogo();
            }, 500);
        }

        // ==========================================
        // INIT E BYPASS RITORNO
        // ==========================================
        (() => {
            const urlParams = new URLSearchParams(window.location.search);
            const standbyScreen = document.getElementById('standby-screen');
            const bootScreen = document.getElementById('boot-screen');
            const btnStartBoot = document.getElementById('btn-start-boot');

            // Se l'utente sta tornando indietro da un'altra pagina
            if (urlParams.get('return') === 'true') {
                if(standbyScreen) standbyScreen.style.display = 'none'; 
                if(bootScreen) bootScreen.style.display = 'none'; 
                
                document.body.classList.add('zoom-normal');
                applyProfile(); 
                
                // Mostra subito tutto senza il typewriting lungo
                document.getElementById('main-banner').style.opacity = '1';
                robotSpeak("Ritorno al Terminale completato. In attesa di istruzioni.");
                
                const grid = document.getElementById('main-options');
                grid.style.opacity = '1';
                grid.style.pointerEvents = 'auto';
                document.querySelectorAll('.bento-card').forEach(card => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                });
            } 
            // Avvio normale al primo caricamento
            else if (btnStartBoot) {
                btnStartBoot.addEventListener('click', () => {
                    if(standbyScreen) standbyScreen.style.display = 'none';
                    
                    setTimeout(() => { 
                        const line1 = document.getElementById('line1');
                        if(line1) line1.style.opacity = '1'; 
                        SoundEngine.bootBeepDynamic(1); 
                        setTimeout(() => {
                            simulateLoading('line2', 'prog2', 'OK', 'var(--green-neon)', () => { SoundEngine.bootBeepDynamic(2);
                                setTimeout(() => {
                                    simulateLoading('line3', 'prog3', '100%', 'var(--green-neon)', () => { SoundEngine.bootBeepDynamic(3);
                                        setTimeout(() => {
                                            simulateLoading('line4', 'prog4', 'ATTIVO', 'var(--green-neon)', () => { SoundEngine.bootBeepDynamic(4);
                                                setTimeout(() => {
                                                    const line5 = document.getElementById('line5');
                                                    if(line5) line5.style.opacity = '1';
                                                    SoundEngine.bootSuccess();
                                                    setTimeout(eseguiEffettoCRT, 1200);
                                                }, 400);
                                            });
                                        }, 400);
                                    });
                                }, 400);
                            });
                        }, 800);
                    }, 500); 
                });
            }
        })();
    </script>
</body>
</html>
